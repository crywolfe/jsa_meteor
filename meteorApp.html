<head>
  <title>JSA App</title>
  <!--[if lt IE 9]><script src="flashcanvas.js"></script><![endif]-->
  <!--<script src="client/assets/jquery.signaturepad.min.js"></script>
  <script ipt src="client/assets/json2.min.js"></script>-->
  <!-- <link rel="stylesheet" href="client/assets/jquery.signaturepad.css"> -->
  </head>

<body>

<h1>SVG IS BELOW</h1>
<svg height="150" width="300">
    <path d="{{svgSig}}" stroke="blue" />
</svg>

<!-- {{doc2}} -->

{{show}}
  <h1>Job Safety Analysis App</h1>
    {{> loginButtons }}
    <div class="signature"> 
        {{> signature}}
    </div>
    <div class="admin-dashboard">
        {{> adminDashboard}}
    </div>


</body>

<template name="adminDashboard">
  <h3>ADMIN DASHBOARD</h3>
  <h4>Click on Date, Location, or User Email, to retrieve a detail in PDF </h4>
  <h4>(STILL IN DEVELOPMENT) </h4>
  <table>
    <tr>
      <th>Date</th>
      <th>Location</th>
      <th>User Email</th>
      <th>Signature</th>
    </tr>
    {{#each allUserForms}}
    <tr id="{{_id}}">
      <td>{{createdAt}}</td>
      <td>{{location}}</td>
      <td>{{userEmail}}</td>
      <td>
        <div id="{{_id}}">
            <div class="sigWrapper">
                <canvas class="pad" width="350" height="225"></canvas>
            </div>
        </div>
      </td>
    </tr>
    {{/each}}
    {{generate}}
  </table>

  <!-- Show signatures - iterate through them
  <div class="sigPad signed">
    <div class="sigWrapper">
      <div class="typed">Gerald</div>
      <canvas class="pad" width="200" height="55"></canvas>
    </div>
    <p>Gerald<br>Date</p>
  </div>
-->
</template>

<template name="preparation"></template>

<template name="signature">

  <form method="post" action="" class="sigPad">
    <h3>Section 1 - Project Information</h3>
    <table>
        <tr>
            <td><h4>Client: </h4></td>
            <td>
                <select name="client">
                    <option value="None" selected>None</option>
                    <option value="NextEra" id="client-1">NextEra</option>
                    <option value="Whiting" id="client-2">Whiting</option>
                    <option value="Flatirons" id="client-3">Flatirons</option>
                  </select>
            </td>
        </tr>
        <tr>
            <td><h4>Project: </h4></td>
            <td>
              <select name="project">
                <option value="None" selected>None</option>
                <option value="1st project" id="1st-project">1st project</option>
                <option value="2nd project" id="2nd-project">2nd project</option>
                <option value="3rd project" id="3rd-project">3rd project</option>
              </select>
            </td>
        </tr>

        <tr>
            <td><h4>Location: </h4></td>
            <td>
              <select name="location">
                <option value="None" selected>None</option>
                <option value="1st location" id="1st-location">1st location</option>
                <option value="2nd location" id="2nd-location">2nd location</option>
                <option value="3rd location" id="3rd-location">3rd location</option>
              </select>
            </td>
        </tr>

    </table>

    <h3>Job Information</h3>
    <h4> Job: </h4><input type="text" name="job" id="job" placeholder="job"/>
    <h4> Supervisor: </h4><input type="text" name="supervisor" id="supervisor" placeholder="supervisor"/>
    <h4> Unit/Area: </h4><input type="text" name="area" id="area" placeholder="area"/>
    <h4> Date: </h4><input type="date" name="date" id="date" placeholder="date"/>
    <h4> Time: </h4><input type="time" name="time" id="time" placeholder="time"/>
        <h4> Permit: </h4><input type="text" name="permit" id="permit" placeholder="permit"/>

    <h3>Section 2 - PPE Requirements</h3>
    <table class="u-full-width">
      <tbody>
      <tr>
          <td>safety glasses </td><td> <input class="checkbox" type="checkbox" name="safety-glasses" id="safety-glasses"></td>
          <td>hearing protection </td><td><input type="checkbox" name="hearing-protection" id="hearing-protection"></td>
      </tr>
      <tr>
        <td>fall protection </td><td><input type="checkbox" name="fall-protection" id="fall-protection"></td>
        <td>face shield </td><td><input type="checkbox" name="face-shield" id="face-shield"></td>
      </tr>
      <tr>
        <td>gas monitor </td><td><input type="checkbox" name="gas-monitor" id="gas-monitor"></td>
        <td>chemical gloves </td><td><input type="checkbox" name="chemical-gloves" id="chemical-gloves"></td>
      </tr>
      <tr>
        <td>hard hat </td><td><input type="checkbox" name="hard-hat" id="hard-hat"></td>
        <td>FR clothing </td><td><input type="checkbox" name="fr-clothing" id="fr-clothing"></td>
      </tr>
      <tr>
        <td>elevated work </td><td><input type="checkbox" name="elevated-work" id="elevated-work"/></td>
        <td>safety toed boots </td><td><input type="checkbox" name="safety-toed-boots" id="safety-toed-boots"/></td>
      </tr>
      <tr>
      <td>leather gloves </td><td><input type="checkbox" name="leather-gloves" id="leather-gloves"/></td>
        <td>rubber gloves </td><td><input type="checkbox" name="rubber-gloves" id="rubber-gloves"/></td>
      </tr>
      </tbody>
    </table>
    
    <h3>Pre-Job Preparation</h3>
    <table>
        <tr>
            <th>Sequence of Job Steps</th>
            <th>Potential Hazards</th>
            <th>Recommended Safe Procedures</th>
        </tr>
        <tr>
            <td><input type="text" name="sequence" id="sequence"/></td>
            <td><input type="text" name="pot-hazard" id="pot-hazard"/></td>
            <td><input type="text" name="procedures" id="procedures"/></td>
        </tr>
    </table>
    <table>
        <tr>
            <th>Other Permits</th>
            <th>Welding</th>
            <th>Hazards(chemicals)</th>
            <th>Access</th>
        </tr>
        <tr>
            <td><input type="text" name="other-permit" id="other-permit"/></td>
            <td><input type="text" name="welding" id="welding"/></td>
            <td><input type="text" name="hazard" id="hazard"/></td>
            <td><input type="text" name="access" id="access"/></td>
        </tr>
    </table>

    <label for="name">Print your name</label>
    <input type="text" name="name" id="name" class="name">
    <!--<p class="typeItDesc">Review your signature</p> -->
    <p class="drawItDesc">Draw your signature</p>
    <ul class="sigNav">
        <!--<li class="typeIt"><a href="#type-it" class="current">Type
        It</a></li> -->
      <li class="drawIt"><a href="#draw-it">Draw It</a></li>
      <li class="clearButton"><a href="#clear">Clear</a></li>
    </ul>
    <div class="sig sigWrapper">
      <div class="typed"></div>
      <canvas class="pad" width="598" height="245"></canvas>
      <input type="hidden" name="output" class="output">
    </div>
    <br>
    <br>
    <br>
    <br>
    <button type="submit">I accept and approve the content of this JSA.</button>
  </form>
  <script>
  // var oneUserForm = Jsaform.findOne();
  //
  // var api = $('.sigPad').signaturePad({displayOnly:true});
  // api.regenerate(allUserForms.sig);
  // api.regenerate(oneUserForm.sig);


  $(document).ready(function() {
    // var sig = [{"lx":78,"ly":22,"mx":78,"my":21},{"lx":78,"ly":22,"mx":78,"my":22},{"lx":77,"ly":22,"mx":78,"my":22},{"lx":74,"ly":23,"mx":77,"my":22},{"lx":72,"ly":25,"mx":74,"my":23},{"lx":68,"ly":26,"mx":72,"my":25},{"lx":62,"ly":28,"mx":68,"my":26},{"lx":58,"ly":29,"mx":62,"my":28},{"lx":54,"ly":30,"mx":58,"my":29},{"lx":51,"ly":31,"mx":54,"my":30},{"lx":49,"ly":32,"mx":51,"my":31},{"lx":47,"ly":32,"mx":49,"my":32},{"lx":46,"ly":32,"mx":47,"my":32},{"lx":52,"ly":32,"mx":46,"my":32},{"lx":67,"ly":31,"mx":52,"my":32},{"lx":86,"ly":31,"mx":67,"my":31},{"lx":114,"ly":31,"mx":86,"my":31},{"lx":140,"ly":32,"mx":114,"my":31},{"lx":170,"ly":38,"mx":140,"my":32},{"lx":193,"ly":41,"mx":170,"my":38},{"lx":214,"ly":42,"mx":193,"my":41},{"lx":196,"ly":49,"mx":196,"my":48},{"lx":196,"ly":48,"mx":196,"my":49},{"lx":164,"ly":43,"mx":196,"my":48},{"lx":149,"ly":40,"mx":164,"my":43},{"lx":133,"ly":36,"mx":149,"my":40},{"lx":123,"ly":32,"mx":133,"my":36},{"lx":117,"ly":31,"mx":123,"my":32},{"lx":113,"ly":27,"mx":117,"my":31},{"lx":109,"ly":22,"mx":113,"my":27},{"lx":108,"ly":18,"mx":109,"my":22},{"lx":108,"ly":15,"mx":108,"my":18},{"lx":108,"ly":12,"mx":108,"my":15},{"lx":108,"ly":10,"mx":108,"my":12},{"lx":107,"ly":9,"mx":108,"my":10},{"lx":107,"ly":8,"mx":107,"my":9},{"lx":107,"ly":7,"mx":107,"my":8},{"lx":107,"ly":6,"mx":107,"my":7},{"lx":106,"ly":6,"mx":107,"my":6},{"lx":105,"ly":6,"mx":106,"my":6},{"lx":104,"ly":6,"mx":105,"my":6},{"lx":103,"ly":6,"mx":104,"my":6},{"lx":102,"ly":6,"mx":103,"my":6},{"lx":100,"ly":7,"mx":102,"my":6},{"lx":100,"ly":8,"mx":100,"my":7},{"lx":100,"ly":9,"mx":100,"my":8},{"lx":98,"ly":10,"mx":100,"my":9},{"lx":96,"ly":14,"mx":98,"my":10},{"lx":95,"ly":16,"mx":96,"my":14},{"lx":93,"ly":20,"mx":95,"my":16},{"lx":92,"ly":24,"mx":93,"my":20},{"lx":92,"ly":26,"mx":92,"my":24},{"lx":92,"ly":27,"mx":92,"my":26},{"lx":92,"ly":28,"mx":92,"my":27},{"lx":92,"ly":29,"mx":92,"my":28}];
          $('.sigPad').signaturePad({drawOnly:true});
    // var api = $('.sigPad').signaturePad({displayOnly:true});
    // api.regenerate(sig);
    console.log("ready function");
    //$('.sigPad').signaturePad({displayOnly:true}).regenerate(sig);
  });
  </script>

</template>
